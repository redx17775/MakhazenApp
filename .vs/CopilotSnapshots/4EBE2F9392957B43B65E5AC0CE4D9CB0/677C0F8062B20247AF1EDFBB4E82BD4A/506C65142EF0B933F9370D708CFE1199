using Microsoft.AspNetCore.Mvc.RazorPages;
using MakhazenApp.Data;
using Microsoft.EntityFrameworkCore;

public class IndexModel : PageModel
{
    private readonly ApplicationDbContext _db;
    public IndexModel(ApplicationDbContext db) { _db = db; }
    public int ProductCount { get; set; }
    public int CategoryCount { get; set; }

    public void OnGet()
    {
        try
        {
            // LINQ simple count
            ProductCount = _db.Product.Count();
        }
        catch { ProductCount = 0; }

        try
        {
            // Count categories from Category table
            CategoryCount = _db.Category.Count();
        }
        catch { CategoryCount = 0; }
    }
}
